(this["webpackJsonpgoit-fe-course-react"]=this["webpackJsonpgoit-fe-course-react"]||[]).push([[0],{24:function(e,t,a){e.exports=a(73)},72:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),l=a(8),s=a(3),i=a(4),u=a(6),h=a(5),m=a(7),p=a(10),d=a.n(p),f=a(11),g=a.n(f),b="4681256-c51c2d2cfbfc0b79b27448a20";g.a.defaults.baseURL="https://pixabay.com/api";var v=function(){var e,t,a,n=arguments;return d.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:"nature",t=n.length>1&&void 0!==n[1]?n[1]:"1",r.prev=2,r.next=5,d.a.awrap(g.a.get("/?q=".concat(e,"&page=").concat(t,"&key=").concat(b,"&image_type=photo&orientation=horizontal&per_page=12")));case 5:return a=r.sent,r.abrupt("return",a);case 9:throw r.prev=9,r.t0=r.catch(2),console.log(r.t0),new Error(r.t0);case 13:case"end":return r.stop()}}),null,null,[[2,9]])},E=a(9),O=a(12),S=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("ul",null,this.props.data.map((function(t){return r.a.createElement("li",{key:t.id,id:t.id},r.a.createElement("span",null,t.name,": ",t.number),r.a.createElement("button",{onClick:e.props.delete},"Delete"))})))}}]),t}(n.Component),y=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data.filter((function(t){return t.name.toLowerCase().includes(e.props.filter)}));return r.a.createElement("ul",null,t.map((function(t){return r.a.createElement("li",{key:t.id,id:t.id},r.a.createElement("span",null,t.name,": ",t.number),r.a.createElement("button",{onClick:e.props.delete},"Delete"))})))}}]),t}(n.Component),j=function(e){var t=e.name,a=e.number,n=e.onHandleGetValue,c=e.onHandleSubmit;return r.a.createElement("form",{onSubmit:c},r.a.createElement("input",{value:t,onChange:n,type:"text",placeholder:"Enter name...",name:"name"}),r.a.createElement("input",{value:a,onChange:n,type:"text",placeholder:"Enter name...",name:"number"}),r.a.createElement("button",{type:"submit"},"Add contact"))},C=a(48),w={name:"",number:""},k=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state=Object(O.a)({},w),a.onHandleSubmit=function(e){e.preventDefault(),console.log(a.state),a.props.getContact(a.state),a.setState(Object(O.a)({},w))},a.onHandleGetValue=function(e){var t=e.target.value,n=e.target.name;a.setState((function(){var e=Object(E.a)({id:C()},n,t);return console.log(e),e}))},a.onHandleDelete=function(e){var t=e.target.closest("li").id;a.props.delete(t)},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.number;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(j,{name:t,number:a,onHandleSubmit:this.onHandleSubmit,onHandleGetValue:this.onHandleGetValue}),r.a.createElement("h2",null,"Contacts"),r.a.createElement("input",{onChange:this.props.search,type:"text",placeholder:"Search user by name..."}),""!==this.props.filter?r.a.createElement(y,{data:this.props.data,filter:this.props.filter,delete:this.onHandleDelete}):r.a.createElement(S,{data:this.props.data,delete:this.onHandleDelete}))}}]),t}(n.Component),H=function(e){var t=e.onHandleSubmit,a=e.onHandleGetValue;return r.a.createElement("header",{className:"Searchbar"},r.a.createElement("form",{className:"SearchForm",onSubmit:t},r.a.createElement("button",{type:"submit",className:"SearchForm-button"},r.a.createElement("span",{className:"SearchForm-button-label"},"Search")),r.a.createElement("input",{className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:a})))},V=function(e){var t=e.data,a=e.handleOpen;return r.a.createElement("li",{className:"ImageGalleryItem"},r.a.createElement("img",{src:t.webformatURL,alt:"kartinka",className:"ImageGalleryItem-image",onClick:function(){return a(t.largeImageURL)}}))},N=function(e){var t=e.data,a=e.handleOpen;return r.a.createElement("ul",{className:"ImageGallery"},t.map((function(e){return r.a.createElement(V,{data:e,key:e.id,handleOpen:a})})))},G=function(e){return r.a.createElement("button",{className:"Button",onClick:e.pageCalc},"Load more...")},F=a(23),D=a.n(F),I=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(D.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3,className:"Spinner"})}}]),t}(r.a.Component),M=function(e){var t=e.handleClose,a=e.show,n=e.url,c=a?"Overlay":"display-none";return r.a.createElement("div",{className:c,onClick:function(e){"IMG"!==e.target.nodeName&&t()}},r.a.createElement("div",{className:"Modal"},r.a.createElement("img",{src:n,alt:""})))},x=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={search:"",show:!1},a.showModal=function(e){a.setState({show:!0,url:e})},a.hideModal=function(){a.setState({show:!1})},a.onHandleSubmit=function(e){e.preventDefault(),console.log(a.state),a.props.getSearchValue(a.state.search),a.setState({search:""})},a.onHandleGetValue=function(e){var t=e.target.value;a.setState((function(){return{search:t}}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.hideModal)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keyup",this.hideModal)}},{key:"render",value:function(){return console.log(this.props.loading),r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{onHandleSubmit:this.onHandleSubmit,onHandleGetValue:this.onHandleGetValue}),this.props.loading?r.a.createElement(I,null):r.a.createElement(N,{data:this.props.data,handleOpen:this.showModal}),this.props.data.length>0?r.a.createElement(G,{pageCalc:this.props.pageCalc}):"",r.a.createElement(M,{show:this.state.show,handleClose:this.hideModal,url:this.state.url}))}}]),t}(n.Component),L=(a(72),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={contacts:[],filter:"",images:[],searchValue:"",page:1,loading:!0},a.deleteContact=function(e){a.setState((function(t){return{contacts:t.contacts.filter((function(t){return t.id!==e}))}}))},a.getContact=function(e){var t;(t=console).log.apply(t,Object(l.a)(a.state.contacts)),a.setState((function(t){return{contacts:[].concat(Object(l.a)(t.contacts),[e])}})),console.log(a.state)},a.dataSeacrh=function(e){var t=e.target.value.toLowerCase();a.setState((function(){return{filter:t}}))},a.getSearchValue=function(e){a.setState((function(){return{searchValue:e}}))},a.pageCalc=function(){a.setState((function(e){return{page:e.page+1}})),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState((function(e){return{contacts:[].concat(Object(l.a)(e.contacts),Object(l.a)(JSON.parse(localStorage.getItem("contacts"))))}})),v().then((function(t){e.setState({images:t.data.hits,loading:!1})}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;t.contacts.length!==this.state.contacts.length&&(console.log(t.contacts.length,this.state.contacts.length),localStorage.setItem("contacts",JSON.stringify(this.state.contacts))),t.searchValue!==this.state.searchValue&&(this.setState({loading:!0}),v(this.state.searchValue).then((function(e){a.setState({images:e.data.hits,loading:!1})}))),this.state.page>1&&t.page!==this.state.page&&v(this.state.searchValue,this.state.page).then((function(e){a.setState((function(t){return{images:[].concat(Object(l.a)(t.images),Object(l.a)(e.data.hits))}}))}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{data:this.state.images,getSearchValue:this.getSearchValue,pageCalc:this.pageCalc,loading:this.state.loading}),r.a.createElement(k,{getContact:this.getContact,data:this.state.contacts,filter:this.state.filter,search:this.dataSeacrh,delete:this.deleteContact}))}}]),t}(n.Component));o.a.render(r.a.createElement(L,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.5b18300b.chunk.js.map