{"version":3,"sources":["components/services/services.js","components/Phonebook/Contact/Contact.js","components/Phonebook/Filter/Filter.js","components/Phonebook/ContactForm/ContactForm.js","components/Phonebook/Phonebook.js","components/Gallery/SearchBar/SearchBar.js","components/Gallery/ImageGalleryItem/ImageGalleryItem.js","components/Gallery/ImageGallery/ImageGallery.js","components/Gallery/Button/Button.js","components/Gallery/Loader/Loader.js","components/Gallery/Modal/Modal.js","components/Gallery/Gallery.js","components/App.js","index.js"],"names":["APIkey","axios","defaults","baseURL","searchItem","pageNumber","get","data","console","log","Error","Contact","this","props","map","elem","key","id","name","number","onClick","delete","Component","Filter","filter","user","toLowerCase","includes","ContactForm","onHandleGetValue","onHandleSubmit","onSubmit","value","onChange","type","placeholder","randomID","require","initialState","Phonebook","state","e","preventDefault","getContact","setState","info","target","x","onHandleDelete","closest","search","SearchBar","className","autoComplete","autoFocus","ImageGalleryItem","handleOpen","src","webformatURL","alt","largeImageURL","ImageGallery","Button","pageCalc","Spinner","color","height","width","timeout","React","Modal","handleClose","show","url","showHideClassName","nodeName","Gallery","showModal","hideModal","getSearchValue","window","addEventListener","removeEventListener","loading","length","App","contacts","images","searchValue","page","deleteContact","prev","contact","dataSeacrh","scrollTo","top","document","documentElement","scrollHeight","behavior","prevState","JSON","parse","localStorage","getItem","services","then","hits","prevProps","setItem","stringify","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.7b85bc36.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst APIkey = \"4681256-c51c2d2cfbfc0b79b27448a20\";\r\naxios.defaults.baseURL = \"https://pixabay.com/api\";\r\n\r\nexport default {\r\n  async getData(searchItem = \"nature\", pageNumber = \"1\") {\r\n    try {\r\n      const data = await axios.get(\r\n        `/?q=${searchItem}&page=${pageNumber}&key=${APIkey}&image_type=photo&orientation=horizontal&per_page=12`\r\n      );\r\n      return data;\r\n    } catch (error) {\r\n      console.log(error);\r\n      throw new Error(error);\r\n    }\r\n  }\r\n};\r\n","import React, { Component } from \"react\";\r\n\r\nclass Contact extends Component {\r\n  render() {\r\n    return (\r\n      <ul>\r\n        {this.props.data.map(elem => (\r\n          <li key={elem.id} id={elem.id}>\r\n            <span>\r\n              {elem.name}: {elem.number}\r\n            </span>\r\n            <button onClick={this.props.delete}>Delete</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Contact;\r\n","import React, { Component } from \"react\";\r\n\r\nclass Filter extends Component {\r\n  render() {\r\n    const filter = this.props.data.filter(user => {\r\n      return user.name.toLowerCase().includes(this.props.filter);\r\n    });\r\n\r\n    return (\r\n      <ul>\r\n        {filter.map(elem => (\r\n          <li key={elem.id} id={elem.id}>\r\n            <span>\r\n              {elem.name}: {elem.number}\r\n            </span>\r\n            <button onClick={this.props.delete}>Delete</button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst ContactForm = ({ name, number, onHandleGetValue, onHandleSubmit }) => (\r\n  <form onSubmit={onHandleSubmit}>\r\n    <input\r\n      value={name}\r\n      onChange={onHandleGetValue}\r\n      type=\"text\"\r\n      placeholder=\"Enter name...\"\r\n      name=\"name\"\r\n    />\r\n    <input\r\n      value={number}\r\n      onChange={onHandleGetValue}\r\n      type=\"text\"\r\n      placeholder=\"Enter name...\"\r\n      name=\"number\"\r\n    />\r\n    <button type=\"submit\">Add contact</button>\r\n  </form>\r\n);\r\n\r\nexport default ContactForm;\r\n","import React, { Component } from \"react\";\r\nimport Contacts from \"./Contact/Contact\";\r\nimport Filter from \"./Filter/Filter\";\r\nimport ContactForm from \"./ContactForm/ContactForm\";\r\n\r\nconst randomID = require(\"uuid/v1\");\r\n\r\nconst initialState = {\r\n  name: \"\",\r\n  number: \"\"\r\n};\r\n\r\nexport default class Phonebook extends Component {\r\n  state = {\r\n    ...initialState\r\n  };\r\n\r\n  onHandleSubmit = e => {\r\n    e.preventDefault();\r\n    console.log(this.state);\r\n    this.props.getContact(this.state);\r\n    this.setState({\r\n      ...initialState\r\n    });\r\n  };\r\n\r\n  onHandleGetValue = e => {\r\n    const info = e.target.value;\r\n    const name = e.target.name;\r\n    this.setState(() => {\r\n      const x = {\r\n        id: randomID(),\r\n        [name]: info\r\n      };\r\n      console.log(x);\r\n      return x;\r\n    });\r\n  };\r\n\r\n  onHandleDelete = e => {\r\n    const id = e.target.closest(\"li\").id;\r\n    this.props.delete(id);\r\n  };\r\n\r\n  render() {\r\n    const { name, number } = this.state;\r\n    return (\r\n      <>\r\n        <h2>Phonebook</h2>\r\n        <ContactForm\r\n          name={name}\r\n          number={number}\r\n          onHandleSubmit={this.onHandleSubmit}\r\n          onHandleGetValue={this.onHandleGetValue}\r\n        />\r\n        <h2>Contacts</h2>\r\n        <input\r\n          onChange={this.props.search}\r\n          type=\"text\"\r\n          placeholder=\"Search user by name...\"\r\n        />\r\n        {this.props.filter !== \"\" ? (\r\n          <Filter\r\n            data={this.props.data}\r\n            filter={this.props.filter}\r\n            delete={this.onHandleDelete}\r\n          />\r\n        ) : (\r\n          <Contacts data={this.props.data} delete={this.onHandleDelete} />\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nconst SearchBar = ({ onHandleSubmit, onHandleGetValue }) => (\r\n  <header className=\"Searchbar\">\r\n    <form className=\"SearchForm\" onSubmit={onHandleSubmit}>\r\n      <button type=\"submit\" className=\"SearchForm-button\">\r\n        <span className=\"SearchForm-button-label\">Search</span>\r\n      </button>\r\n\r\n      <input\r\n        className=\"SearchForm-input\"\r\n        type=\"text\"\r\n        autoComplete=\"off\"\r\n        autoFocus\r\n        placeholder=\"Search images and photos\"\r\n        onChange={onHandleGetValue}\r\n      />\r\n    </form>\r\n  </header>\r\n);\r\n\r\nexport default SearchBar;\r\n","import React from \"react\";\r\n\r\nconst ImageGalleryItem = ({ data, handleOpen }) => (\r\n  <li className=\"ImageGalleryItem\">\r\n    <img\r\n      src={data.webformatURL}\r\n      alt=\"kartinka\"\r\n      className=\"ImageGalleryItem-image\"\r\n      onClick={() => handleOpen(data.largeImageURL)}\r\n    />\r\n  </li>\r\n);\r\n\r\nexport default ImageGalleryItem;\r\n","import React from \"react\";\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nconst ImageGallery = ({ data, handleOpen }) => (\r\n  <ul className=\"ImageGallery\">\r\n    {data.map(elem => (\r\n      <ImageGalleryItem data={elem} key={elem.id} handleOpen={handleOpen} />\r\n    ))}\r\n  </ul>\r\n);\r\n\r\nexport default ImageGallery;\r\n","import React from \"react\";\r\n\r\nconst Button = props => (\r\n  <button className=\"Button\" onClick={props.pageCalc}>\r\n    Load more...\r\n  </button>\r\n);\r\n\r\nexport default Button;\r\n","import React from \"react\";\r\n\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nexport default class Spinner extends React.Component {\r\n  render() {\r\n    return (\r\n      <Loader\r\n        type=\"Puff\"\r\n        color=\"#00BFFF\"\r\n        height={100}\r\n        width={100}\r\n        timeout={3000} //3 secs\r\n        className=\"Spinner\"\r\n      />\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\n\r\nconst Modal = ({ handleClose, show, url }) => {\r\n  const showHideClassName = show ? \"Overlay\" : \"display-none\";\r\n\r\n  return (\r\n    <div\r\n      className={showHideClassName}\r\n      onClick={e => {\r\n        if (e.target.nodeName !== \"IMG\") {\r\n          handleClose();\r\n        }\r\n      }}\r\n    >\r\n      <div className=\"Modal\">\r\n        <img src={url} alt=\"\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React, { Component } from \"react\";\r\nimport SearchBar from \"./SearchBar/SearchBar\";\r\nimport ImageGallery from \"./ImageGallery/ImageGallery\";\r\nimport Button from \"./Button/Button\";\r\nimport Loader from \"./Loader/Loader\";\r\nimport Modal from \"./Modal/Modal\";\r\n\r\nclass Gallery extends Component {\r\n  state = {\r\n    search: \"\",\r\n    show: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keyup\", this.hideModal);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keyup\", this.hideModal);\r\n  }\r\n\r\n  showModal = url => {\r\n    this.setState({ show: true, url });\r\n  };\r\n\r\n  hideModal = () => {\r\n    this.setState({ show: false });\r\n  };\r\n\r\n  onHandleSubmit = e => {\r\n    e.preventDefault();\r\n    console.log(this.state);\r\n    this.props.getSearchValue(this.state.search);\r\n    this.setState({\r\n      search: \"\"\r\n    });\r\n  };\r\n\r\n  onHandleGetValue = e => {\r\n    const info = e.target.value;\r\n    this.setState(() => {\r\n      return { search: info };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    console.log(this.props.loading);\r\n    return (\r\n      <>\r\n        <SearchBar\r\n          onHandleSubmit={this.onHandleSubmit}\r\n          onHandleGetValue={this.onHandleGetValue}\r\n        />\r\n        {this.props.loading ? (\r\n          <Loader />\r\n        ) : (\r\n          <ImageGallery data={this.props.data} handleOpen={this.showModal} />\r\n        )}\r\n        {this.props.data.length > 0 ? (\r\n          <Button pageCalc={this.props.pageCalc} />\r\n        ) : (\r\n          \"\"\r\n        )}\r\n        <Modal\r\n          show={this.state.show}\r\n          handleClose={this.hideModal}\r\n          url={this.state.url}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Gallery;\r\n","import React, { Component } from \"react\";\r\nimport services from \"./services/services\";\r\nimport Phonebook from \"./Phonebook/Phonebook\";\r\nimport Gallery from \"./Gallery/Gallery\";\r\nimport \"./App.css\";\r\n\r\nclass App extends Component {\r\n  state = {\r\n    contacts: [\r\n      { id: \"id-1\", name: \"Rosie Simpson\", number: \"459-12-56\" },\r\n      { id: \"id-2\", name: \"Hermione Kline\", number: \"443-89-12\" },\r\n      { id: \"id-3\", name: \"Eden Clements\", number: \"645-17-79\" },\r\n      { id: \"id-4\", name: \"Annie Copeland\", number: \"227-91-26\" }\r\n    ],\r\n    filter: \"\",\r\n    images: [],\r\n    searchValue: \"\",\r\n    page: 1,\r\n    loading: true\r\n  };\r\n\r\n  componentDidMount() {\r\n    // localStorage.setItem(\"contacts\", JSON.stringify(this.state.contacts));\r\n    this.setState(prevState => {\r\n      return {\r\n        contacts: [\r\n          ...prevState.contacts,\r\n          ...JSON.parse(localStorage.getItem(\"contacts\"))\r\n        ]\r\n      };\r\n    });\r\n    services.getData().then(data => {\r\n      this.setState({ images: data.data.hits, loading: false });\r\n    });\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    if (prevState.contacts.length !== this.state.contacts.length) {\r\n      console.log(prevState.contacts.length, this.state.contacts.length);\r\n      localStorage.setItem(\"contacts\", JSON.stringify(this.state.contacts));\r\n    }\r\n    if (prevState.searchValue !== this.state.searchValue) {\r\n      this.setState({ loading: true });\r\n      services.getData(this.state.searchValue).then(data => {\r\n        this.setState({ images: data.data.hits, loading: false });\r\n      });\r\n    }\r\n    if (this.state.page > 1 && prevState.page !== this.state.page) {\r\n      services.getData(this.state.searchValue, this.state.page).then(data => {\r\n        this.setState(prev => {\r\n          return { images: [...prev.images, ...data.data.hits] };\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  deleteContact = id => {\r\n    this.setState(prev => {\r\n      return {\r\n        contacts: prev.contacts.filter(contact => contact.id !== id)\r\n      };\r\n    });\r\n  };\r\n\r\n  getContact = contact => {\r\n    console.log(...this.state.contacts);\r\n    this.setState(prev => {\r\n      return {\r\n        contacts: [...prev.contacts, contact]\r\n      };\r\n    });\r\n    console.log(this.state);\r\n  };\r\n\r\n  dataSeacrh = e => {\r\n    const value = e.target.value.toLowerCase();\r\n    this.setState(() => {\r\n      return {\r\n        filter: value\r\n      };\r\n    });\r\n  };\r\n\r\n  getSearchValue = searchItem => {\r\n    this.setState(() => {\r\n      return {\r\n        searchValue: searchItem\r\n      };\r\n    });\r\n  };\r\n\r\n  pageCalc = () => {\r\n    this.setState(prev => {\r\n      return {\r\n        page: prev.page + 1\r\n      };\r\n    });\r\n    window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: \"smooth\"\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <Gallery\r\n          data={this.state.images}\r\n          getSearchValue={this.getSearchValue}\r\n          pageCalc={this.pageCalc}\r\n          loading={this.state.loading}\r\n        />\r\n        <Phonebook\r\n          getContact={this.getContact}\r\n          data={this.state.contacts}\r\n          filter={this.state.filter}\r\n          search={this.dataSeacrh}\r\n          delete={this.deleteContact}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./components/App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}